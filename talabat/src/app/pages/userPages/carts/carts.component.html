<section>
  <div class="container">
    <h1>Your Carts</h1>
    <p-dataView #dv [value]="allProductInCart" [rows]="5" [paginator]="true">
      <ng-template pTemplate="list" let-allProductInCart>
        <div class="grid grid-nogutter">
          @for (product of allProductInCart; track $index) {
            <div class="col-12" class="col-12">
              <div
                class="flex flex-column sm:flex-row sm:align-items-center p-4 gap-3"
                [ngClass]="{ 'border-top-1 surface-border': !$first }"
              >
                <div class="md:w-10rem relative">
                  <img
                    class="block xl:block mx-auto border-round w-full"
                    [src]="product?.pictureUrl"
                    [alt]="product?.name"
                  />
                </div>
                <div
                  class="flex flex-column md:flex-row justify-content-between md:align-items-center flex-1 gap-4"
                >
                  <div
                    class="flex flex-row md:flex-column justify-content-between align-items-start gap-2"
                  >
                    <div>
                      <div class="text-lg font-medium text-900 mt-2">
                        {{ product?.name }}
                      </div>
                    </div>
                  </div>
                  <div class="flex flex-column md:align-items-end gap-5">
                    <span class="text-xl font-semibold text-900"
                      >Price: {{ "$" + product?.price }}</span
                    >
                    <div class="flex flex-row-reverse md:flex-row gap-2">
                      <div class="flex-auto">
                        <label class="mb-2 block font-bold" for="horizontal">
                          Quantity
                        </label>
                        <p-inputNumber
                          [(ngModel)]="product.count"
                          [showButtons]="true"
                          buttonLayout="horizontal"
                          inputId="horizontal"
                          spinnerMode="horizontal"
                          [step]="1"
                          decrementButtonClass="p-button-danger"
                          incrementButtonClass="p-button-success"
                          incrementButtonIcon="pi pi-plus"
                          decrementButtonIcon="pi pi-minus"
                          (onInput)="updateCount()"
                        />
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          }
        </div>
      </ng-template>
    </p-dataView>
    @if (allProductInCart.length > 0) {
      <p-button
        [routerLink]="['/checkout']"
        label="buy now"
        styleClass="my-2 uppercase w-full font-bold"
        icon="pi pi-shopping-cart text-2xl mx-5"
        iconPos="right"
        severity="warning"
      />
      <p-button
        (click)="clearCart()"
        label="Clear Carts"
        styleClass="my-2 uppercase w-full font-bold"
        icon="pi pi-shopping-cart text-2xl mx-5"
        iconPos="right"
        severity="warning"
      />
    }
  </div>
</section>
